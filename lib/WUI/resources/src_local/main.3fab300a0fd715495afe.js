(()=>{var e={373:e=>{e.exports=' <div id="title" class="txt-size-1"> <p class="title-status"> <span id="title-status-label" class="txt-grey"></span> </p> <p class="title-hostname txt-orange">Original Prusa Mini</p> </div> <div class="job"> <div class="job-stats"> <div class="progress"> <p data-type="job" data-where="job.file.name" class="txt-white txt-size-2"></p> <progress value="0" max="1"></progress> <p data-format="progress" data-type="job" data-where="progress.completion"> 0% </p> </div> <div class="stats" id="job-stats"> <div> <p data-label="prop.z-height" class="txt-size-2 txt-grey">Z-Height</p> <p class="txt-bold txt-size-2" data-format="pos" data-type="job" data-where="progress.pos_z_mm"></p> </div> <div> <p data-label="prop.speed" class="txt-size-2 txt-grey">Printing Speed</p> <p class="txt-bold txt-size-2" data-format="print" data-type="job" data-where="progress.printSpeed"></p> </div> <div> <p data-label="prop.flow" class="txt-size-2 txt-grey">Printing Flow</p> <p class="txt-bold txt-size-2" data-format="print" data-type="job" data-where="progress.flow_factor"></p> </div> <div> <p data-label="prop.est-end" class="txt-size-2 txt-grey">Estimated end</p> <p class="txt-bold txt-size-2" data-format="timeEst" data-type="job" data-where="progress.printTimeLeft"></p> </div> <div> <p data-label="prop.pnt-time" class="txt-size-2 txt-grey">Printing time</p> <p class="txt-bold txt-size-2" data-format="time" data-type="job" data-where="progress.printTime"></p> </div> </div> </div> </div> <div class="main-wrapper"> <div class="component"> <p class="txt-grey txt-size-1">temperatures</p> <div id="graph" class="temp"></div> </div> </div> '},319:e=>{e.exports=' <div id="title" class="txt-size-1"> <p class="title-status"> <span id="title-status-label" class="txt-grey"></span> </p> <p class="title-hostname txt-orange">Original Prusa Mini</p> </div> <div class="main-wrapper row" id="graph"></div> '},694:(e,t,n)=>{"use strict";n.d(t,{LK:()=>d,Z5:()=>p});var a=n(780);const r={count:0,current:0},o=(e,t={})=>{const n=Object.assign({timeout:5500,closeOutside:!0},t),o=r.count;r.count=r.count+1;const i=document.querySelector(".modal-box"),s=i.parentElement;for(;i.firstChild;)i.removeChild(i.firstChild);const l=()=>{o==r.current&&s.classList.contains("show-modal")&&(s.classList.remove("show-modal"),n.closeCallback&&n.closeCallback())},u=e=>{e.target===s&&l()};n.closeOutside&&window.addEventListener("click",u);const d=e(l);r.current=o,i.appendChild(d),(0,a.ot)(i),s.classList.add("show-modal"),n.timeout>0&&setTimeout(l,n.timeout)};var i=n(43);const s=()=>new Promise(((e,t)=>{o((e=>t=>{const n=document.getElementById("modal-apiKey"),a=document.importNode(n.content,!0);return a.getElementById("apiKey").addEventListener("keydown",(n=>{"Enter"==n.key&&(t(),e(n.target.value))})),a.getElementById("login").addEventListener("click",(n=>{n.preventDefault();let a=document.getElementById("apiKey").value;t(),e(a)})),a})(e),{timeout:0,closeOutside:!1})})).then((e=>sessionStorage.setItem("apiKey",e))),l=()=>"ApiKey"==sessionStorage.getItem("authType")?{"X-Api-Key":sessionStorage.getItem("apiKey"),Accept:"application/json"}:{Accept:"application/json"},u=()=>new Promise(((e,t)=>(sessionStorage.setItem("auth","pending"),fetch("/api/version",{headers:l()}).then((t=>{if(401==t.status){const n=t.headers.get("WWW-Authenticate").split(" ")[0];return("ApiKey"!=n||sessionStorage.getItem("authType"))&&t.json().then((e=>(0,i.S)({data:e}))),sessionStorage.setItem("authType",n),sessionStorage.removeItem("apiKey"),"ApiKey"==n?s().then((()=>u().then((t=>e(t))))):u().then((t=>e(t)))}return t.json()})).then((t=>{sessionStorage.setItem("auth","true"),e(t)}))))),d=(e,t={})=>new Promise(((n,a)=>{"true"==sessionStorage.getItem("auth")?(t.headers={...t.headers,...l()},fetch(e,t).then((e=>{const t=e.status,r={code:t,eTag:e.headers.get("etag")};401==t?(sessionStorage.setItem("auth","false"),a(r)):204==t||304==t?n(r):e.json().then((t=>{r.data=t,e.ok?n(r):a(r)}))}))):a({code:401})})),c=e=>{const t=document.getElementById("modal-welcome"),n=document.importNode(t.content,!0);return n.querySelector(".close-button").addEventListener("click",e),n},p=()=>null==localStorage.getItem("showWelcome")?new Promise(((e,t)=>{o(c,{closeCallback:()=>{localStorage.setItem("showWelcome",!0),e()}})})).then((()=>u())):u()},537:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});const a=function(e){return"string"==typeof e?document.getElementById(e):e||document.body}},741:e=>{e.exports=function(e,t){let n=t.split("."),a=e;for(const e of n)if(a=a[e],!a)break;return a}},780:(e,t,n)=>{"use strict";n.d(t,{m0:()=>p,G3:()=>m,Vb:()=>g,Iu:()=>h,ot:()=>v});var a=n(537),r=n(741),o=n.n(r);const i=n(242),s=i.langs,l=i.texts;let u,d;function c(){return navigator.language||navigator.userLanguage||""}function p(e){const t=s.indexOf(e);return-1!==t&&(d=t,u=e,localStorage.setItem("lang",u),!0)}function m(){return u}function g(){return[...s]}function h(e,t){let n=o()(l,`${e}.${d}`);if(null==n)return n=e,f(n,t),n;let a=null;if(t&&(a=Object.assign({},t),delete a.query,delete a.ref),a&&Object.keys(a).length>0){let e,a=n,r=/{{(.*?)}}/g;for(;e=r.exec(n);){let r=n.substr(e.index+2,e[0].length-4);if("query"!==r&&"ref"!==r){if(r in t){let n=t[r];a=a.replace(e[0],n)}0}}n=a}return f(n,t),n}function f(e,t){if(t)if(t.ref){t.ref.innerHTML=e}else if(t.query){let n=document.querySelector(t.query);n&&(n.innerHTML=e)}}function v(e){(0,a.Z)(e).querySelectorAll("[data-label]").forEach((e=>{e.innerHTML=h(e.getAttribute("data-label"))}))}p(localStorage.getItem("lang"))||p(c().toLowerCase())||p(c().toLowerCase().split("-")[0])||p("en")},242:e=>{"use strict";e.exports=JSON.parse('{"langs":["cs","de","en","es","fr","it","pl"],"texts":{"home":{"link":["Přehled","Dashboard","Dashboard","Panel principal","Tableau de bord","Dashboard","Panel kontrolny"],"title":["Stav tiskárny","Druckerstatus","Printer status","Estado de la impresora","État de l\'imprimante","Stato della stampante","Stan drukarki"]},"temps":{"title":["Teploty","Temperaturen","Temperatures","Temperaturas","Températures","Temperature","Temperatury"],"x":["Čas [s]","Zeit [s]","Time [s]","Tiempo [s]","Temps [s]","Tempo [s]","Czas [s]"],"y":["Teplota [°C]","Temperatur [°C]","Temperature [°C]","Temperatura [°C]","Température [°C]","Temperatura [°C]","Temperatura [°C]"]},"prop":{"temp-nozzle":["Teplota trysky","Düsentemperatur","Nozzle Temperature","Temperatura del nozzle","Température de la buse","Temperatura ugello","Temperatura dyszy"],"temp-bed":["Vyhřívaná podložka","Heizbett","Heatbed","Base calefactable","Plateau chauffant","Piano riscaldato","Stół"],"material":["Materiál","Material","Material","Material","Matériau","Materiale","Materiał"],"z-height":["Výška Z","Z-Höhe","Z-Height","Altura-Z","Hauteur en Z","Altezza-Z","Wysokość Z"],"speed":["Rychlost tisku","Druckgeschwindigkeit","Printing Speed","Velocidad de impresión","Vitesse d\'impression","Velocità di stampa","Prędkość drukowania"],"flow":["Tok tisku","Druckfluss","Printing Flow","Flujo de impresión","Flux d\'impression","Flusso di stampa","Przepływ filamentu"],"est-end":["Odhadovaný konec","Erwartetes Ende","Estimated end","Fin estimado","Fin estimée","Fine prevista","Szacowane zakończenie"],"pnt-time":["Doba tisku","Druckzeit","Printing time","Tiempo de impresión","Temps d\'impression","Tempo di stampa","Czas druku"],"st-idle":["Nečinná","Leerlauf","Idle","En espera","Repos","Inattivo","Oczekuje"],"st-printing":["Probíhá tisk","Druckt","Printing","Imprimiendo","Impression","Stampa","Drukowanie"],"at":["v","um","at","a las","à","alle","o"],"less-than":["Méně než minuta","Weniger als eine Minute","Less than a minute","Menos de un minuto","Moins d\'une minute","Meno di un minuto","Mniej niż minuta"],"today-at":["Dnes v","Heute um","Today at","Hoy a las","Aujourd\'hui à","Oggi alle","Dzisiaj o"],"tmw-at":["Zítra v","Morgen um","Tomorrow at","Mañana a las","Demain à","Domani alle","Jutro o"],"na":["N/A","NV","NA","NA","NA","ND","N/D"],"cover-closed":["Uzavřené","Geschlossen","Closed","Cerrada","Fermé","Chiuso","Zamknięta"],"cover-opened":["Otevřené","Geöffnet","Opened","Abierta","Ouvert","Aperto","Otwarta"]},"msg":{"modal-p1":["Vítejte na webovém rozhraní vaší","Willkommen zur Weboberfläche Ihres","Welcome to the web interface of your","Bienvenido a la interfaz web de tu","Bienvenue dans l\'interface web de votre","Benvenuto nell\'interfaccia web del tuo","Witaj w interfejsie Twojej"],"modal-p2":["Upozornění: některé hodnoty jsou zobrazeny pouze v průběhu tisku.","Bitte beachten Sie, dass die Werte nur angezeigt werden, wenn der Drucker gerade druckt.","Please note that values are shown only when the printer is printing.","Tenga en cuenta que los valores se muestran solo cuando la impresora está imprimiendo.","Veuillez noter que les valeurs sont affichées uniquement lorsque l\'imprimante imprime.","Si noti che i valori vengono visualizzati solo durante la stampa.","Wartości będą wyświetlane tylko podczas drukowania."],"api-key-1":["Vítejte ve webovém rozhraní Prusa Connect Local!","Willkommen auf der Web-Oberfläche von Prusa Connect Local.","Welcome to the Prusa Connect Local web interface.","Bienvenido a la interfaz web de Prusa Connect Local.","Bienvenue sur l\'interface web locale de Prusa Connect.","Benvenuti nell\'interfaccia web di Prusa Connect Local.","Witaj w interfejsie sieciowym Prusa Connect Local."],"api-key-2":["Vložte API klíč.","Bitte geben Sie den API-Schlüssel ein.","Please insert the API key.","Por favor introduce la clave API.","Veuillez insérer la clé API.","Si prega di inserire la chiave API.","Wpisz klucz API."],"api-key-3":["Otevřete menu Nastavení -> Síť -> Přihlašovací údaje","Sie finden ihn in Einstellungen -> Netzwerk -> Anmeldedaten.","You can find it in Settings -> Network -> Login credentials.","Puedes encontrarla en Ajustes -> Red -> Credenciales de acceso.","Vous pouvez la trouver dans Réglages -> Réseau -> Informations de connexion.","È possibile trovarla in Impostazioni -> Rete -> Credenziali di accesso","Możesz znaleźć go w sekcji Ustawienia -> Sieć -> Dane logowania."]},"btn":{"login":["Přihlášení","Login","Login","Iniciar sesión","Connexion","Accedi","Zaloguj"]},"unit":{"h":["h","h","h","h","h","h","g"],"min":["min","min","min","min","min","min","min"],"minute":["minuta","Minute","minute","minuto","minute","minuto","minuta"],"minute_plural":["minut","Minuten","minutes","minutos","minutes","minuti","minuty"],"ml":["ml","ml","ml","ml","ml","ml","ml"],"rpm":["RPM","UPM","RPM","RPM","TPM","RPM","Obroty"]},"proj":{"title":["Soubory projektu","Projektdateien","Project files","Archivos de proyecto","Fichiers de projet","File di progetto","Pliki projektu"]}}}')},43:(e,t,n)=>{"use strict";n.d(t,{S:()=>l});n(694);const a=document.getElementById("prusa-toast"),r=(e,t,n)=>{const a=document.getElementById("toast"),r=document.importNode(a.content,!0),o=r.querySelector("article");return o.className=n,r.querySelector("p").innerHTML=e,r.querySelector(".toast-body").innerHTML=t,o};function o(e,t,n="error"){const o=r(e,t,n);o.querySelector("span").addEventListener("click",(e=>{e.preventDefault(),a.removeChild(o)})),a.appendChild(o)}function i(e,t){o(e,t,"warning")}let s=[null,null];function l(e){if(e&&e.data){const t=e.data;s[0]=t.code;const n=`${t.title} - ${t.code}`,a=t.message+`<br/><a href="${t.url}" target="_blank">more info</a>`;"7"==t.code[3]?i(n,a):o(n,a)}}},532:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Z});var a=n(780);const r=500;let o=100,i=new Map;const s=(e,t)=>{i=e,o=t};function l(){const e=document.getElementById("graph");e&&(0==e.childElementCount&&function(){const e=document.getElementById("graph-template"),t=document.importNode(e.content,!0);document.getElementById("graph").appendChild(t),(0,a.ot)("graph")}(),i.forEach(((e,t)=>{!function(e,t){const n=(new Date).getTime();let a=[];if(e.length>1){let t=e[0],i=r-2.66*(n-t[0]-1e4)/1e3;for(let e=1;e<t.length;e++)a.push(`M${i},${250-2*t[e]/(o/100)}`);for(let s=1;s<e.length;s++){t=e[s],i=r-2.66*(n-t[0]-1e4)/1e3;for(let e=0;e<a.length;e++)a[e]=a[e]+`L${i},${250-2*t[e+1]/(o/100)}`}}t.setAttribute("d",a)}(e,document.getElementById(t))})))}function u(e,t){!function(e,t){e.push(t);const n=(new Date).getTime();for(;e.length>1&&e[1][0]<n-18e4;)e.shift()}(i.get(e),t)}var d=n(694);const c=(0,a.Iu)("prop.at"),p=(0,a.Iu)("unit.h"),m=(0,a.Iu)("prop.less-than"),g=(0,a.Iu)("unit.min"),h=(0,a.Iu)("unit.minute"),f=(0,a.Iu)("unit.minute_plural"),v=((0,a.Iu)("unit.ml"),(0,a.Iu)("unit.rpm")),y=(0,a.Iu)("prop.today-at"),b=(0,a.Iu)("prop.tmw-at");function w(e){return e>0?e.toFixed(1):0}function T(e){const t=new Date(1e3*e);return(t.toDateString()+" "+t.toTimeString()).substring(0,25)}function I(e){let t="00:00";if(e){let n=new Date;const a=6e4*-n.getTimezoneOffset();let r=new Date(n.getTime()+1e3*e+a),o=new Date(n);o.setDate(o.getDate()+1);let i="";if(r.getUTCDate()==n.getUTCDate()&&r.getUTCMonth()==n.getUTCMonth())i=`${y} `;else if(r.getUTCDate()==o.getUTCDate()&&r.getUTCMonth()==o.getUTCMonth())i=`${b} `;else{let e={month:"numeric",day:"numeric",timeZone:"UTC"};i=`${r.toLocaleString(window.navigator.language,e)} ${c} `}t=i+("0"+r.getUTCHours()).substr(-2)+":"+("0"+r.getUTCMinutes()).substr(-2)}return t}function k(e){if(e<60)return m;const t=Math.floor(e/60%60),n=Math.floor(e/3600);return n>0?n+` ${p}`+(t>0?` ${t} ${g}`:""):t+" "+(t>1?f:h)}const S=(e,t)=>{if(void 0===t)return(0,a.Iu)("prop.na");switch(e){case"number":return w(t);case"temp":return w(t)+" °C";case"fan":return w(t)+` ${v}`;case"print":return w(t)+" %";case"pos":return w(t)+" mm";case"date":return T(t);case"time":return k(t);case"timeEst":return I(t);case"progress":return w(100*t)+"%";default:return t}},z=(e,t)=>S(e,t),x=(e,t)=>{document.querySelectorAll(`[data-type="${e}"]`).forEach((e=>{const n=e.dataset.where,a=n?((e,t)=>{try{const n=e.split(".");let a=t;for(;n.length;)a=a[n.shift()];return a}catch(e){return}})(n,t):t;e.innerHTML=z(e.dataset.format,a)}))};var P=n(43);const M=()=>{(0,a.Iu)("proj.title",{query:"#title-status-label"}),(0,d.LK)("/api/job").then((e=>{const t=e.data,n=t.progress.completion;n&&(document.querySelector("progress").value=n),x("job",t)})).catch((e=>(0,P.S)(e)))},E=()=>{document.getElementById("title-status-label").innerHTML=`<p class="txt-grey" >${(0,a.Iu)("home.title")}:<span id="title-status" class="txt-orange">Idle</span></p>`,document.getElementById("title-status").innerText=(0,a.Iu)("prop.st-idle"),document.getElementById("temps-title").innerText=(0,a.Iu)("temps.title").toLowerCase(),l(),x("job",{})},L={load:E,update:e=>{e&&e.printer.state.flags.printing&&!e.printer.state.flags.ready?(M(),document.getElementById("title-status").innerText=(0,a.Iu)("prop.st-printing")):E()}},j={load:()=>{(0,a.Iu)("temps.title",{query:"#title-status-label"}),l()}};var C=n(373),D=n.n(C),B=n(319),A=n.n(B);const O={version:void 0,printer:void 0};let N=L;const q={routes:[{path:"dashboard",html:D(),module:L},{path:"temperature",html:A(),module:j}],init:(e,t)=>{O.version=e,O.printer=t,H()},update:e=>{O.printer=e,x("telemetry",e),_(e),$()},setModule:e=>{N=e}},H=()=>{let e=new Map([["temp-line-blue",[]],["temp-line-orange",[]]]);s(e,300),l()},_=e=>{const t=(new Date).getTime();u("temp-line-blue",[t,e.temperature.bed.actual]),u("temp-line-orange",[t,e.temperature.tool0.actual]),l()},$=()=>{N&&N.update&&N.update(O)},Z=q}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var o=t[a]={exports:{}};return e[a](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e=n(780);const t=n(532).default,a=n=>{const[a,r]=n.split("#");if(!r)return!1;const o=t.routes.find((e=>e.path===r));if(!o)return!1;const i=document.getElementById("root");i.innerHTML="",(new DOMParser).parseFromString(o.html,"text/html").body.childNodes.forEach((e=>i.appendChild(e))),(0,e.ot)(i),o.module.load(),t.setModule(o.module);const s=document.querySelector(`a[href="#${r}"]`);return s&&(document.getElementById("navbar").childNodes.forEach((e=>{"li"===e.nodeName.toLowerCase()&&e.classList.remove(["active"])})),s.parentNode.className="active"),!0};var r=n(694),o=n(537);class i{set value(e){this._value=e,this.updateLabel()}get value(){return this._value}constructor(e,t,n){this._label=t,this._ul=n,this._value=t.innerHTML,this.onselect=void 0;const a=()=>{this.close(),window.removeEventListener("click",a)};e.onclick=e=>{this.open(),e.stopPropagation(),window.addEventListener("click",a)}}static init(e){let t=(0,o.Z)(e);const n=document.getElementById("dropdown-template"),a=t.querySelector('select[data-type="dropdown"]');if(!a)return;a.after(document.importNode(n.content,!0));const r=a.nextElementSibling;a.remove();const s=r.querySelector(".dropdown-btn"),l=s.querySelector(".dropdown-label"),u=r.querySelector(".dropdown-content ul");return s&&l&&u?new i(s,l,u):void 0}setOptions(e){e.forEach((e=>{const t=document.createElement("li");t.innerHTML=e,t.onclick=()=>{this.select(e),this.onselect&&this.onselect(e),this.close()},this._ul.appendChild(t)}))}updateLabel(){this._label.innerHTML=this._value}select(e){this._label.innerHTML=e}open(){this._ul.classList.toggle("open")}close(){this._ul.classList.remove(["open"])}}window.onload=()=>{(()=>{document.getElementById("menu").addEventListener("click",(e=>{const t=document.getElementById("menu");"navbar-burger"==t.className?(t.className="navbar-burger burger-open",document.getElementById("navbar").className=""):(t.className="navbar-burger",document.getElementById("navbar").className="burger-menu")}));const t=i.init(document.getElementById("navbar"));t&&(t.setOptions((0,e.Vb)()),t.value=(0,e.G3)(),t.onselect=t=>{(0,e.m0)(t),window.location.reload()})})(),(0,e.ot)(),document.querySelectorAll("a[href]").forEach((e=>{e.addEventListener("click",(t=>{a(e.href)&&(document.title="Original Prusa Mini - "+e.innerText,history.pushState(null,document.title,e.href),t.preventDefault())}))})),(0,r.Z5)().then((e=>{(0,r.LK)("/api/printer").then((n=>{t.init(e,n.data),setInterval((()=>(0,r.LK)("/api/printer").then((e=>{t.update(e.data)})).catch((e=>{if(401==e.code){"false"==(sessionStorage.getItem("auth")||"false")&&(0,r.Z5)()}}))),1e3),window.onpopstate=e=>e&&a(e.currentTarget.location.hash),a(window.location.hash||"#dashboard")}))}))}})()})();
