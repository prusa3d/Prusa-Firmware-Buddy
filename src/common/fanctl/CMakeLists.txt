if(BOARD MATCHES "XLBUDDY")
  target_sources(firmware PRIVATE CFanCtlCommon.cpp)
  add_subdirectory(on_puppy)
elseif((BOARD MATCHES "XBUDDY") AND (PRINTER STREQUAL "MK3.5"))
  target_sources(firmware PRIVATE CFanCtlCommon.cpp mk3.5/fanctl_instances.cpp)
  add_subdirectory(local)
elseif(BOARD MATCHES "XBUDDY")
  target_sources(firmware PRIVATE CFanCtlCommon.cpp xbuddy/fanctl_instances.cpp)
  add_subdirectory(local)
elseif(BOARD MATCHES "BUDDY")
  target_sources(firmware PRIVATE buddy/fanctl_instances.cpp CFanCtlCommon.cpp)
  add_subdirectory(local)
elseif(BOARD MATCHES "DWARF")
  target_sources(firmware PRIVATE CFanCtlCommon.cpp dwarf/fanctl_instances.cpp)
  add_subdirectory(local)
endif()

target_include_directories(BuddyHeaders INTERFACE .)
